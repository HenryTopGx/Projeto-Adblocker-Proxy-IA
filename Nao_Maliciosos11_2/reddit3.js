import{i as t,x as e,_ as i,s,n as a}from"./icon-d4ddc4dd.js";import{f as r,F as n,c as l}from"./form-common-utils-2dbcb5e1.js";import{s as o}from"./shell-2c778290.js";class d{constructor(t,e,i,s,a,r,n,l,o,d){this.valueMissing=t,this.typeMismatch=e,this.patternMismatch=i,this.tooLong=s,this.tooShort=a,this.rangeUnderflow=r,this.rangeOverflow=n,this.stepMismatch=l,this.badInput=o,this.customError=d}}class c{constructor(t){this.submissionValue=null,this.constraintsSuffered={},this.customValidityMessage="",this.validityMessage="",this.validationAnchor=null,this.target=t,this.input=document.createElement("input"),this.input.className="faceplate-internal-input",this.input.tabIndex=-1,this.input.style.opacity="0",this.input.style.width="1px",this.input.style.height="100%",this.input.style.padding="0",this.input.style.border="0",this.input.style.pointerEvents="none",this.input.hidden=!0}_connect(t){t?(this._form=t,r.register(t,this.target)):this._form=void 0}_disconnect(){this._form&&(r.unregister(this._form,this.target),this._form=void 0)}getFormValue(){return this.submissionValue}setFormValue(t){this.submissionValue=t}get form(){return this._form}isSufferingFromItsConstraints(){for(const t in this.constraintsSuffered)if(this.constraintsSuffered[t])return!0;return!1}setValidity(t,e,i=null){if(t){const e=this.convertFlagsToValidityState(t);for(const i in t)this.constraintsSuffered[i]=e[i]}else this.constraintsSuffered={};const s=!!e&&this.isSufferingFromItsConstraints();if(t&&Object.prototype.hasOwnProperty.call(t,"customError")){const t=this.constraintsSuffered.customError&&e?e:"";this.customValidityMessage=t}else this.validationAnchor=i,this.validityMessage=s&&e?e:"";(this.validationAnchor||this.input).setCustomValidity(this.validationMessage),this.target.setAttribute("faceplate-validity",s?"invalid":"valid")}get willValidate(){return!(this.target.disabled||null===this.submissionValue)}convertFlagsToValidityState(t){return new d(!!t.valueMissing,!!t.typeMismatch,!!t.patternMismatch,!!t.tooLong,!!t.tooShort,!!t.rangeUnderflow,!!t.rangeOverflow,!!t.stepMismatch,!!t.badInput,!!t.customError)}get validity(){const t=this.constraintsSuffered;return this.convertFlagsToValidityState(t)}get validationMessage(){return this.customValidityMessage||this.validityMessage}dispatchInvalidEvent(){const t=new Event("invalid",{bubbles:!0,cancelable:!0});return this.target.dispatchEvent(t),t}checkValidity(){return!this.isSufferingFromItsConstraints()||(this.dispatchInvalidEvent(),!1)}reportValidity(){if(this.isSufferingFromItsConstraints()){if(!this.dispatchInvalidEvent().defaultPrevented){(this.validationAnchor||this.input).reportValidity()}return!1}return!0}}const h=o(),u=new MutationObserver((t=>{for(const e of t){if("attributes"!==e.type||"disabled"!==e.attributeName||!(e.target instanceof HTMLFieldSetElement))continue;const t=h.getRegisteredElements(e.target);if(t)for(const i of t)i.formDisabledCallback&&i.formDisabledCallback(i.disabled||e.target.disabled)}}));function f(t){if(n in t)return t;class e extends t{constructor(){super(...arguments),this._internals=new c(this)}connectedCallback(){super.connectedCallback&&super.connectedCallback(),l(this).then((t=>{if(!t||!this.isConnected)return;this._internals._connect(t),this.formAssociatedCallback&&this.formAssociatedCallback(t);let e=this;for(;e.parentElement&&(e=e.parentElement,e!==t)&&!(e instanceof HTMLLegendElement);)if(e instanceof HTMLFieldSetElement){this._fieldSet=e;h.getRegisteredElements(e)||u.observe(e,{attributes:!0}),h.register(e,this);break}this.formDisabledCallback&&this.formDisabledCallback(this.disabled)}))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this._internals._disconnect(),this.formAssociatedCallback&&this.formAssociatedCallback(null),this._fieldSet&&(h.unregister(this._fieldSet,this),this._fieldSet=void 0)}get value(){return this._internals.getFormValue()}set value(t){this._internals.setFormValue(t),this.syncInputValidity(!1)}get form(){return this._internals.form}get name(){return this.getAttribute("name")||""}get disabled(){return this.hasAttribute("disabled")||!(!this._fieldSet||!this._fieldSet.disabled)}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled"),this.formDisabledCallback&&this.formDisabledCallback(t||!(!this._fieldSet||!this._fieldSet.disabled))}get type(){return this.localName}get validity(){return this._internals.validity}get validationMessage(){return this._internals.validationMessage}get willValidate(){return this._internals.willValidate}checkValidity(){return this._internals.checkValidity()}reportValidity(){return this._internals.reportValidity()}setCustomValidity(t){this._internals.setValidity({customError:!!t},t)}syncInputValidity(t=!0){var e;const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("input:not(.faceplate-internal-input),textarea");if(!i)return;t&&this.setAttribute("faceplate-dirty","");let s={};if(this._internals.validity.customError){for(const t in i.validity)s[t]=i.validity[t];s.customError=!0}else s=i.validity;this._internals.setValidity(s,i.validationMessage||this._internals.validationMessage)}}return e[n]=!0,e}class b extends(f(s)){static get styles(){return t`:host{display:inline-block;position:relative}:host([aria-disabled=true]){cursor:not-allowed;opacity:.5}:host([faceplate-validity=invalid]){border-color:var(--color-danger-content)}.faceplate-internal-input{position:absolute;left:50%;bottom:0}`}get disabled(){return super.disabled}set disabled(t){super.disabled=t}constructor(){super(),this.ariaDisabled="false",this.addEventListener("focus",(()=>{const t=new FocusEvent("focusin",{bubbles:!0});this.dispatchEvent(t)}))}render(){return e` ${this._internals.input} `}formDisabledCallback(t){this.ariaDisabled=t?"true":"false"}formResetCallback(){this.value=this.getAttribute("value"),this.removeAttribute("faceplate-dirty")}}function m(){return b}i([a({type:Boolean,reflect:!0})],b.prototype,"disabled",null),i([a({type:String,attribute:"aria-disabled",reflect:!0})],b.prototype,"ariaDisabled",void 0);export{b as I,m as T,f as W};
//# sourceMappingURL=input-element-4e5521eb.js.map